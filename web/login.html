<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>تسجيل الدخول - لعبة Crash</title>
  <style>
    body { font-family: sans-serif; text-align:center; background:#111; color:#eee; }
    .box { margin:50px auto; padding:20px; background:#222; width:300px; border-radius:10px; }
    input { width:90%; padding:10px; margin:10px 0; border-radius:5px; border:none; }
    button { padding:10px 20px; margin:10px; border:none; border-radius:5px; background:#0a84ff; color:white; cursor:pointer; }
    button:hover { background:#0066cc; }
  </style>
</head>
<body>
  <div class="box">
    <h2>Crash Game</h2>
    <input id="username" placeholder="اسم المستخدم"><br>
    <input id="password" type="password" placeholder="كلمة السر"><br>
    <button onclick="signup()">تسجيل جديد</button>
    <button onclick="login()">تسجيل دخول</button>
    <p id="msg"></p>
  </div>

<script>
const API = "https://YOUR-BACKEND-URL/api"; // غيّر بالرابط بتاع app.py

async function signup() {
  let res = await fetch(API + "/signup", {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body: JSON.stringify({
      username: document.getElementById("username").value,
      password: document.getElementById("password").value
    })
  });
  let data = await res.json();
  if(data.ok){
    document.getElementById("msg").innerText = "✅ تم إنشاء الحساب";
  }else{
    document.getElementById("msg").innerText = "❌ " + data.error;
  }
}

async function login() {
  let res = await fetch(API + "/login", {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body: JSON.stringify({
      username: document.getElementById("username").value,
      password: document.getElementById("password").value
    })
  });
  let data = await res.json();
  if(data.ok){
    localStorage.setItem("user_id", data.user_id);
    window.location = "index.html";
  }else{
    document.getElementById("msg").innerText = "❌ " + data.error;
  }
}
</script>
</body>
</html>
